(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-698fc8ab"],{4748:function(t,e,a){"use strict";a("5b09")},"56cf":function(t,e,a){"use strict";a("8582")},"5b09":function(t,e,a){},8582:function(t,e,a){},"8c22":function(t,e,a){"use strict";a("8ce8")},"8ce8":function(t,e,a){},"983d":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.classes,on:{click:t.onClick}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._t("default")],2),t.border?a("span",{staticClass:"divider"}):t._e()])},n=[],i="rich-btn",l={name:"Buttons",props:{border:{type:Boolean,default:!1},type:{type:String,default:"default"}},data:function(){return{}},methods:{onClick:function(t){this.$emit("click",t)}},computed:{classes:function(){return["".concat(i),"".concat(i,"-").concat(this.type)]}}},s=l,c=(a("8c22"),a("c701")),r=Object(c["a"])(s,o,n,!1,null,null,null),d=r.exports;e["a"]=d},cc43:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("tables",{ref:"tables",attrs:{editable:"","search-place":"top",columns:t.columns,showPage:"",total:t.total,current:t.page,"page-size":t.pageno,"show-total":"","show-elevator":"",showlayout:"",loading:t.loading},on:{"on-selection-change":t.chooseEdit,"on-skippage":t.skippage},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}},[a("template",{slot:"header"},[a("div",{staticClass:"search-area"},[a("Button",{staticClass:"ant-btn mg-r-20",attrs:{type:"primary"},on:{click:t.pathEdit}},[a("Icon",{attrs:{type:"md-add"}}),t._v("添加模块模板 ")],1),a("Button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)]),a("template",{slot:"footer"},[a("Checkbox",{staticClass:"table-checkbox",on:{"on-change":t.handleSelectAll},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[a("span",{staticClass:"mg-l-10"},[t._v("已选")]),a("span",{staticStyle:{color:"#3091f2"}},[t._v(t._s(t.chooseID.length))]),a("span",[t._v(" / "+t._s(t.tableData.length)+" 个商品")])]),a("Button",{staticClass:"table-btn mg-r-20",attrs:{disabled:0==t.chooseID.length},on:{click:function(e){return t.goodsedit("delete")}}},[t._v("删除")])],1)],2),a("Modal",{attrs:{width:"360"},model:{value:t.isModal,callback:function(e){t.isModal=e},expression:"isModal"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("确认删除吗")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("Form",{ref:"addPriseApp",attrs:{"label-position":"left","label-width":210}},[a("FormItem",{attrs:{label:"是否将模板目录文件一起删除："}},[a("i-switch",{model:{value:t.delfile,callback:function(e){t.delfile=e},expression:"delfile"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:t.choose2edit}},[t._v("删除")])],1)]),a("Modal",{attrs:{title:"添加模板模块"},on:{"on-ok":t.blockAdd},model:{value:t.addBlock.isModal,callback:function(e){t.$set(t.addBlock,"isModal",e)},expression:"addBlock.isModal"}},[a("Form",{attrs:{"label-position":"right","label-width":120}},[a("FormItem",{attrs:{label:"模板文件路径："}},[a("Input",{attrs:{type:"text"},model:{value:t.addBlock.path,callback:function(e){t.$set(t.addBlock,"path",e)},expression:"addBlock.path"}})],1),a("FormItem",{attrs:{label:"模板颜色："}},[a("RadioGroup",{model:{value:t.addBlock.multi_color,callback:function(e){t.$set(t.addBlock,"multi_color",e)},expression:"addBlock.multi_color"}},[a("Radio",{attrs:{label:"1"}},[t._v("彩色")]),a("Radio",{attrs:{label:"0"}},[t._v("单色")])],1)],1),a("FormItem",{attrs:{label:"模板描述："}},[a("Input",{attrs:{type:"text"},model:{value:t.addBlock.info,callback:function(e){t.$set(t.addBlock,"info",e)},expression:"addBlock.info"}})],1)],1)],1),a("Modal",{attrs:{title:"添加模板模块"},on:{"on-ok":t.blockEdit},model:{value:t.editBlock.isModal,callback:function(e){t.$set(t.editBlock,"isModal",e)},expression:"editBlock.isModal"}},[a("Form",{attrs:{"label-position":"right","label-width":120}},[a("FormItem",{attrs:{label:"模板文件路径："}},[a("Input",{attrs:{type:"text"},model:{value:t.editBlock.path,callback:function(e){t.$set(t.editBlock,"path",e)},expression:"editBlock.path"}})],1),a("FormItem",{attrs:{label:"模板颜色："}},[a("RadioGroup",{model:{value:t.editBlock.multi_color,callback:function(e){t.$set(t.editBlock,"multi_color",e)},expression:"editBlock.multi_color"}},[a("Radio",{attrs:{label:"1"}},[t._v("彩色")]),a("Radio",{attrs:{label:"0"}},[t._v("单色")])],1)],1),a("FormItem",{attrs:{label:"模板描述："}},[a("Input",{attrs:{type:"text"},model:{value:t.editBlock.info,callback:function(e){t.$set(t.editBlock,"info",e)},expression:"editBlock.info"}})],1)],1)],1)],1)},n=[],i=(a("422c"),a("1f90"),a("fa69")),l=a("983d"),s={components:{Tables:i["a"],Buttons:l["a"]},data:function(){var t=this;return{isModal:!1,addBlock:{isModal:!1,info:"",path:"",multi_color:"0"},editBlock:{tpl_id:0,isModal:!1,info:"",path:"",multi_color:"0"},columns:[{type:"selection",width:80,align:"center"},{key:"id",title:"ID"},{key:"b_id",title:"B_ID"},{key:"path",title:"模板文件路径",width:230},{key:"info",title:"模板描述"},{title:"颜色",render:function(t,e){return t("div",{style:{color:1==e.row.multi_color?"#47cb89":"#333"}},1==e.row.multi_color?"彩色":"单色")}},{title:"操作",key:"action",align:"center",width:200,render:function(e,a){return e("div",[e(l["a"],{props:{border:!0},style:{},on:{click:function(e){t.editBlock={tpl_id:a.row.id,isModal:!0,info:a.row.info,path:a.row.path,multi_color:a.row.multi_color}}}},"编辑"),e(l["a"],{props:{type:"error"},on:{click:function(e){t.chooseID.push(a.row.id),t.goodsedit()}}},"删除")])}}],tableData:[],chooseID:[],classid:"0",pageno:10,page:1,total:0,loading:!1,isSelectAll:!1,blockname:"",delfile:!1}},created:function(){this.fetchData()},watch:{chooseID:function(t){t.length>=this.tableData.length?this.isSelectAll=!0:this.isSelectAll=!1},$route:"fetchData"},methods:{fetchData:function(){this.page=this.$route.params.pageid?parseInt(this.$route.params.pageid):1,this.blockname=this.$route.params.blockname?this.$route.params.blockname:0,this.dataInitial()},dataInitial:function(){var t=this;this.$http.request({method:"POST",url:"/api_admin.php?action=block_template_list",params:{block_name:this.blockname}}).then((function(e){t.tableData=e.data.body||[],console.log(e)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},chooseEdit:function(t){var e=[];t.forEach((function(t,a){e.push(t.id)})),this.chooseID=e},skippage:function(t){if(this.$route.params.pageid==t)return this.page=t,this.dataInitial();this.$route.push({})},pathEdit:function(){this.addBlock={isModal:!0,info:"",path:"move/tpl/".concat(this.blockname,"/"),multi_color:"0"}},handleSelectAll:function(t){this.$refs.tables.selectAll(t)},goodsedit:function(t){if(0==this.chooseID.length)return this.$Message.warning("请选择要操作的记录"),!1;this.isModal=!0},choose2edit:function(){var t=this;if(!(this.chooseID.length>0))return o.$Message.info("请选择要操作的记录"),!1;var e="/api_admin.php",a={appid:this.vueAppid,delArr:this.chooseID,action:"block_template_del",delfile:this.delfile?1:0};console.log(a);var o=this;o.$http.post(e,a).then((function(t){o.isModal=!1,o.chooseID=[],o.dataInitial()})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},blockAdd:function(){var t=this;this.$http.post("/api_admin.php?action=block_template_add",{block_name:this.blockname,template_path:this.addBlock.path,multi_color:this.addBlock.multi_color,info:this.addBlock.info}).then((function(e){t.addBlock.isModal=!1,t.dataInitial(),console.log(e)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},blockEdit:function(){var t=this;this.$http.post("/api_admin.php?action=block_template_edit",{tpl_id:this.editBlock.tpl_id,template_path:this.editBlock.path,multi_color:this.editBlock.multi_color,info:this.editBlock.info}).then((function(e){t.editBlock.isModal=!1,t.dataInitial(),console.log(e)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))}}},c=s,r=a("c701"),d=Object(r["a"])(c,o,n,!1,null,null,null);e["default"]=d.exports},fa69:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables_template"},[t.showlayout?a("Layout",{staticClass:"layout-wrapper"},[t.searchable?a("Header",{staticClass:"header-wrapper"},[t._t("menu"),a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.value)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.cancelSearch}},[t._v("返回")])],1):t._e()],2)],2):a("Header",{staticClass:"header-wrapper"},[t._t("header")],2),a("Layout",{staticClass:"layout-wrapper"},[t.showsider?a("Sider",{staticClass:"sider-wrapper",attrs:{width:"198"}},[t._t("sider")],2):t._e(),a("Layout",{staticClass:"layout-wrapper"},[a("Content",[a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1),a("Footer",{staticClass:"table-footer"},[t._t("footer")],2)],1)],1)],1):a("div",{staticClass:"tableContent"},[t.searchable?a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.searchKey)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.onCancelSearch}},[t._v("返回")])],1):t._e()],2):t._e(),a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1)],1)},n=[],i=(a("2d38"),a("02bf"),a("4798"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables-edit-outer"},[t.isEditting?a("div",{staticClass:"tables-editting-con"},[a("Input",{staticClass:"tables-edit-input",attrs:{value:t.value},on:{input:t.handleInput}}),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.saveEdit}},[a("Icon",{attrs:{type:"md-checkmark"}})],1),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.canceltEdit}},[a("Icon",{attrs:{type:"md-close"}})],1)],1):a("div",{staticClass:"tables-edit-con"},[a("span",{staticClass:"value-con"},[t._v(t._s(t.value))]),t.editable?a("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{ghost:"",type:"text"},on:{click:t.startEdit}},[a("Icon",{attrs:{type:"md-create"}})],1):t._e()],1)])}),l=[],s={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},data:function(){return{}},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(t){this.$emit("input",t)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},c=s,r=(a("56cf"),a("c701")),d=Object(r["a"])(c,i,l,!1,null,null,null),h=d.exports,u={name:"Tables",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},rowKey:{type:String,default:""},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"},showPage:{type:Boolean,default:!1},total:{type:Number,default:0},pageSize:{type:Number,default:10},current:{type:Number,default:1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showlayout:{type:Boolean,default:!1},showsider:{type:Boolean,default:!1}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},mounted:function(){this.handleColumns(this.columns),this.handleTableData()},watch:{columns:function(t){console.log(t),this.handleColumns(t)},value:function(t){this.handleTableData()}},methods:{handleColumns:function(t){var e=this;this.insideColumns=t.map((function(t,a){var o=t;return o.editable&&(o=e.suportEdit(o,a)),o.key,o}))},handleTableData:function(){this.insideTableData=this.value.map((function(t,e){var a=t;return a.initRowIndex=e,a}))},suportEdit:function(t,e){var a=this;return t.render=function(t,e){return t(h,{props:{params:e,value:a.insideTableData[e.index][e.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(t){a.edittingText=t},"on-start-edit":function(t){a.edittingCellId="editting-".concat(t.index,"-").concat(t.column.key),console.log(a.edittingCellId),a.$emit("on-start-edit",t)},"on-cancel-edit":function(t){a.edittingCellId=""},"on-save-edit":function(t){a.value[t.row.initRowIndex][t.column.key]=a.edittingText?a.edittingText:a.value[t.row.initRowIndex][t.column.key],a.$emit("input",a.value),a.$emit("on-save-edit",Object.assign(t,{value:a.value[t.row.initRowIndex][t.column.key]})),a.edittingCellId=""}}})},t},onCurrentChange:function(t,e){this.$emit("on-current-change",t,e)},selectAll:function(t){this.$refs.tablesMain.selectAll(t)},onSelect:function(t,e){this.$emit("on-select",t,e)},onSelectCancel:function(t,e){this.$emit("on-select-cancel",t,e)},onSelectAll:function(t){this.$emit("on-select-all",t)},onSelectionChange:function(t){this.$emit("on-selection-change",t)},onSortChange:function(t,e,a){this.$emit("on-sort-change",t,e,a)},onFilterChange:function(t){this.$emit("on-filter-change",t)},onRowClick:function(t,e){this.$emit("on-row-click",t,e)},onRowDblclick:function(t,e){this.$emit("on-row-dblclick",t,e)},onExpand:function(t,e){this.$emit("on-expand",t,e)},skippage:function(t){this.$emit("on-skippage",t)},onSearchChange:function(){this.$emit("on-search-change",this.searchKey)},onCancelSearch:function(t){this.$emit("on-cancel-search",t)},onPathEdit:function(t){this.$emit("on-path-edit",t)}}},p=u,f=(a("4748"),Object(r["a"])(p,o,n,!1,null,null,null)),m=f.exports;e["a"]=m}}]);