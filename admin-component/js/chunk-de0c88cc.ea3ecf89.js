(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de0c88cc","chunk-2d0cec00"],{"02b0":function(t,e,a){"use strict";a("f36b")},4748:function(t,e,a){"use strict";a("5b09")},"56cf":function(t,e,a){"use strict";a("8582")},"5b09":function(t,e,a){},"617f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"editAdmin",attrs:{model:t.editAdmin,rules:t.adminLine,"label-position":"right","label-width":150}},[a("FormItem",{attrs:{label:"管理名姓名：",prop:"realname"}},[a("Input",{attrs:{type:"text"},model:{value:t.editAdmin.realname,callback:function(e){t.$set(t.editAdmin,"realname",e)},expression:"editAdmin.realname"}})],1),a("FormItem",{attrs:{label:"手机：",prop:"mobile"}},[a("Input",{attrs:{type:"text"},model:{value:t.editAdmin.mobile,callback:function(e){t.$set(t.editAdmin,"mobile",e)},expression:"editAdmin.mobile"}})],1),a("FormItem",{attrs:{label:"密码：",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.editAdmin.password,callback:function(e){t.$set(t.editAdmin,"password",e)},expression:"editAdmin.password"}})],1),a("FormItem",{attrs:{label:"确认密码：",prop:"isPassword"}},[a("Input",{attrs:{type:"password"},model:{value:t.editAdmin.isPassword,callback:function(e){t.$set(t.editAdmin,"isPassword",e)},expression:"editAdmin.isPassword"}})],1),a("FormItem",{attrs:{label:"管理员等级：",prop:"sort"}},[a("Select",{model:{value:t.editAdmin.sort,callback:function(e){t.$set(t.editAdmin,"sort",e)},expression:"editAdmin.sort"}},[a("Option",{attrs:{value:"0"}},[t._v("普通管理员")]),a("Option",{attrs:{value:"1"}},[t._v("高级管理员")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:0==t.editAdmin.sort,expression:"editAdmin.sort == 0"}],attrs:{label:"可管理的应用 （点击设置权限）："}},[a("Row",{attrs:{gutter:10}},t._l(t.applist,(function(e,o){return 1==e.status?a("Col",{staticStyle:{"padding-bottom":"10px"},attrs:{xs:12,lg:6}},[a("div",{on:{click:function(a){return t.editCompanyData(e,o)}}},[a("Card",[a("div",[t._v(t._s(e.name))]),e.p_code?a("div",[a("span",[t._v("可用功能：")]),t._l(e.p_code,(function(e){return a("span",[t._v(t._s(e.p_name)+"，")])}))],2):t._e()])],1)]):t._e()})),1)],1),a("Form-item",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("editAdmin")}}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("提交")])]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.cancel}},[t._v("取消")])],1)],1),a("Modal",{attrs:{title:"添加权限管理应用"},on:{"on-ok":t.managerAdd,"on-cancel":function(t){}},model:{value:t.addCompanyData.isModal,callback:function(e){t.$set(t.addCompanyData,"isModal",e)},expression:"addCompanyData.isModal"}},[a("Form",{attrs:{"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"功能选择："}},[a("CheckboxGroup",{model:{value:t.addCompanyData.p_code_arr,callback:function(e){t.$set(t.addCompanyData,"p_code_arr",e)},expression:"addCompanyData.p_code_arr"}},t._l(t.codeList,(function(e){return a("Checkbox",{staticStyle:{"margin-bottom":"10px"},attrs:{border:"",label:e.p_code}},[t._v(t._s(e.p_name))])})),1)],1)],1)],1)],1)},i=[],n=(a("422c"),a("1f90"),{data:function(){return{editAdmin:{searchPoptip:!1,id:"",total:0,page:1,realname:"",mobile:"",password:"",isPassword:"",loading:!0,body:[],sort:"0",userid:0},addCompanyData:{isModal:!1,p_code_arr:[],p_code:[],index:""},adminLine:{realname:[{required:!0,message:"必填",trigger:"blur"}],mobile:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"}],isPassword:[{required:!0,message:"必填",trigger:"blur"}]},codeList:[],applist:[],loading:!1,accreditArr:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){this.getAppList()},getAppList:function(t){var e=this,a=this,o={action:"wxapp_listof",page:t||1,pageno:100,apptype:0};a.$http.post("/api_home.php",a.$qs.stringify(o)).then((function(t){console.log(t),e.applist=t.data.body||[]})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},getPrivilege:function(t){var e=this;this.$http.request({method:"POST",url:"/api_home.php?action=app_accredit_listof",params:{appid:t}}).then((function(t){e.codeList=t.data.body||[],console.log(t)})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},handleSubmit:function(t){var e=this,a=this.editAdmin;this.$refs[t].validate((function(t){if(t){if(a.password!=a.isPassword)return e.editAdmin.loading=!1,e.$nextTick((function(){e.editAdmin.loading=!0})),e.$Message.warning("两次密码不一致，请重新输入");var o={realname:a.realname,mobile:a.mobile,password:a.password,sort:a.sort,user:a.userid,accreditArr:e.accreditArr};e.$http.post("/api_home.php?action=manager_add",e.$qs.stringify(o)).then((function(t){e.$Message.info("添加成功"),e.$emit("successCallback",t)})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))}else e.$Message.error("表单验证失败!")}))},editCompanyData:function(t,e){this.addCompanyData.isModal=!0,this.addCompanyData.p_code_arr=t.p_code_arr||[],this.addCompanyData.index=e,console.log(t),this.getPrivilege(t.id)},managerAdd:function(){var t=this.addCompanyData.p_code_arr,e=this.applist[this.addCompanyData.index],a=[];this.codeList.forEach((function(e,o){t.forEach((function(t,o){t==e.p_code&&a.push(e)}))})),this.applist[this.addCompanyData.index].p_code_arr=this.addCompanyData.p_code_arr,this.applist[this.addCompanyData.index].p_code=a,t.length>=1?this.accreditArr[e.id]=t:delete this.accreditArr[e.id]},cancel:function(){this.$emit("cancelCallback",{})}}}),s=n,r=a("c701"),l=Object(r["a"])(s,o,i,!1,null,"6ab53cfb",null);e["default"]=l.exports},8582:function(t,e,a){},c796:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{staticClass:"layout-wrapper",attrs:{id:"welcome-wrapper"}},[a("Header",{staticClass:"index-header"},[a("div",{staticClass:"header-nav"},[a("h1",{staticClass:"logo"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("img",{staticClass:"logo-large",attrs:{src:t.welcome_logo}})])]),a("ul",{staticClass:"nav-list"},[a("li",{staticClass:"active"},[a("router-link",{attrs:{to:""}},[t._v("我的应用")])],1),a("li",[a("span",{on:{click:t.showEditAdmin}},[t._v("管理员管理")])]),t.isAgent?a("li",[a("router-link",{attrs:{to:"/agent_info"}},[t._v("代理商平台")])],1):t._e(),t.isAdmin?a("li",[a("router-link",{attrs:{to:"/admin_info"}},[t._v("超级管理员平台")])],1):t._e()]),a("ul",{staticClass:"account-wrap"},[a("li",[a("div",{on:{click:t.loadingOut}},[t._v("退出")])])])])]),a("Content",{staticClass:"contenter"},[a("div",{staticClass:"page-component"},[a("tables",{ref:"tables",attrs:{editable:"","search-place":"top",columns:t.appData.title,showPage:"",total:t.pageData.total,current:t.pageData.page,"page-size":t.appData.pageno,"show-total":"","show-elevator":"",showlayout:"",loading:t.loading},on:{"on-skippage":t.skippage},model:{value:t.appData.content,callback:function(e){t.$set(t.appData,"content",e)},expression:"appData.content"}},[a("template",{slot:"header"},[a("div",{staticClass:"search-area"},[a("Button",{staticClass:"ant-btn mg-r-20",attrs:{type:"primary"},on:{click:function(e){t.softData.isModal=!0}}},[a("Icon",{attrs:{type:"md-add"}}),t._v("添加应用 ")],1)],1)])],2)],1)]),a("Modal",{attrs:{title:"添加应用",loading:t.softData.loading},on:{"on-ok":t.addSoft,"on-cancel":function(t){}},model:{value:t.softData.isModal,callback:function(e){t.$set(t.softData,"isModal",e)},expression:"softData.isModal"}},[a("Form",{attrs:{"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"应用名称："}},[a("Input",{attrs:{type:"text"},model:{value:t.softData.name,callback:function(e){t.$set(t.softData,"name",e)},expression:"softData.name"}})],1),a("FormItem",{attrs:{label:"软件类型"}},[a("Select",{attrs:{placeholder:"选择软件类型"},model:{value:t.softData.softID,callback:function(e){t.$set(t.softData,"softID",e)},expression:"softData.softID"}},t._l(t.softList,(function(e){return a("Option",{attrs:{value:e.id}},[t._v(t._s(e.softname))])})),1)],1)],1)],1),a("Modal",{attrs:{title:"管理员设置",width:"1000"},on:{"on-ok":function(e){t.isEdit=!1},"on-cancel":function(t){}},model:{value:t.isEdit,callback:function(e){t.isEdit=e},expression:"isEdit"}},[a("tables",{ref:"tables",attrs:{editable:"","search-place":"top",columns:t.adminData.columns,showPage:"",total:t.editAdmin.total,current:t.editAdmin.page,"page-size":t.pageno,"show-total":"","show-elevator":"",showlayout:""},on:{"on-skippage":t.adminSkippage},model:{value:t.adminData.data,callback:function(e){t.$set(t.adminData,"data",e)},expression:"adminData.data"}},[a("template",{slot:"header"},[a("div",{staticClass:"search-area"},[a("Button",{staticClass:"ant-btn mg-r-20",attrs:{type:"primary"},on:{click:t.goeditAdmin}},[a("Icon",{attrs:{type:"md-add"}}),t._v("添加 ")],1),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAdmin(t.keyword)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getAdmin(t.keyword)}}})],1)])],2)],1),a("Modal",{attrs:{title:"修改密码",loading:t.editPassword.loading},on:{"on-ok":function(e){return t.editPasswordData("editPassword")},"on-cancel":function(t){}},model:{value:t.editPassword.isModal,callback:function(e){t.$set(t.editPassword,"isModal",e)},expression:"editPassword.isModal"}},[a("Form",{ref:"editPassword",attrs:{model:t.editPassword,rules:t.passwordLine,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"账号/手机号："}},[a("span",[t._v(t._s(t.editPassword.phone))])]),a("FormItem",{attrs:{label:"新密码：",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.editPassword.password,callback:function(e){t.$set(t.editPassword,"password",e)},expression:"editPassword.password"}})],1),a("FormItem",{attrs:{label:"确认密码：",prop:"isPassword"}},[a("Input",{attrs:{type:"password"},model:{value:t.editPassword.isPassword,callback:function(e){t.$set(t.editPassword,"isPassword",e)},expression:"editPassword.isPassword"}})],1)],1)],1),a("Modal",{attrs:{title:"添加管理员",width:"960"},model:{value:t.addManagerData.isModal,callback:function(e){t.$set(t.addManagerData,"isModal",e)},expression:"addManagerData.isModal"}},[a("addAdmin",{on:{successCallback:t.successCallback,cancelCallback:t.cancelCallback}}),a("p",{attrs:{slot:"footer"},slot:"footer"})],1),a("Modal",{attrs:{title:"修改应用信息"},on:{"on-ok":t.wxappEdit},model:{value:t.isModal,callback:function(e){t.isModal=e},expression:"isModal"}},[a("Form",{attrs:{"label-width":100,"label-position":"left"}},[a("FormItem",{attrs:{label:"应用头像"}},[a("div",{on:{click:t.showFile}},[a("Avatar",{attrs:{shape:"square",icon:"ios-person",size:80,src:t.path}})],1)]),a("FormItem",{attrs:{label:"应用名称"}},[a("Input",{model:{value:t.wxAppName,callback:function(e){t.wxAppName=e},expression:"wxAppName"}})],1)],1)],1),a("Modal",{attrs:{width:"860"},model:{value:t.isUpload,callback:function(e){t.isUpload=e},expression:"isUpload"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("选择图片")]),t.isUpload?a("fileExplorer",{attrs:{options:t.options},on:{successCallback:t.uploadListFun}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),a("Modal",{attrs:{title:"授权信息"},model:{value:t.appGetData.isModal,callback:function(e){t.$set(t.appGetData,"isModal",e)},expression:"appGetData.isModal"}},[a("Form",{attrs:{"label-width":100,"label-position":"left"}},[a("FormItem",{attrs:{label:"授权域名"}},[a("span",[t._v(t._s(t.appGetData.url))])]),a("FormItem",{attrs:{label:"AppCode"}},[a("span",[t._v(t._s(t.appGetData.AppCode))])]),a("FormItem",{attrs:{label:"AppSecret"}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.appGetData.AppSecret))]),a("Button",{attrs:{type:"info"},on:{click:t.editAppSecret}},[t._v("重置")])],1),a("FormItem",{attrs:{label:"userKey"}},[a("span",[t._v(t._s(t.appGetData.userKey))])]),a("FormItem",{attrs:{label:"软件包下载"}},[a("Button",[a("a",{attrs:{target:"_blank",href:"/move/api_home.php?action=softdownload&appid="+t.appGetData.id}},[t._v("下载")])])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},i=[],n=(a("5c4c"),a("4798"),a("d8f4"),a("2083"),a("9d64")),s=a.n(n),r=a("cfb9"),l=a.n(r),d=a("fa69"),c=a("983d"),p=a("e04f"),u=a.n(p),h=a("3e4c"),m=a("617f"),f={components:{Tables:d["a"],Buttons:c["a"],addAdmin:m["default"],fileExplorer:h["a"]},data:function(){var t=this;return{appGetData:{isModal:!1,name:"",haveSoft:!1,id:"",roleID:"",softID:"",AppSecret:"",url:"",user:""},isUpload:!1,options:{mode:"single",_displayMode:"grid",type:"image",appid:0},softData:{name:"",isModal:!1,softID:0,loading:!0},softList:[],loading:!1,welcome_logo:s.a,applogo:l.a,selectData:[],tabActive:"xcx",isAgent:0,isAdmin:0,pageData:{total:0,page:1,pageno:10},content:2,wxAppName:"",picname:"",path:"",app_id:"",isModal:!1,_index:0,isUploadApp:!1,maxWidth:1200,mbData:{title:[{title:"网站图标",key:"img"},{name:"网站名称",key:"name"},{yumin:"网站域名",key:"yumin"}],data:[{}]},appData:{title:[{title:"APPID",key:"id",align:"center",width:100,render:function(t,e){return t("div",{},e.row.user+"-"+e.row.id)}},{title:"应用图标",key:"img",align:"center",width:100,render:function(e,a){return e("div",[e("img",{attrs:{src:a.row.logo||t.applogo},style:{margin:"10px",width:"50px",height:"50px"},on:{click:function(){t.show(a),t._index=a.row._index}}})])}},{title:"应用名称",key:"name",width:200,align:"center",render:function(e,a){var o=[e("Dropdown",{props:{placement:"right"},on:{"on-click":function(e){t.openPage(a.row,e),console.log(e)}}},[e("Button",{props:{type:"text"},style:{margin:"5px",padding:"0 20px",color:"#39f"},on:{click:function(){}}},a.row.name),e("DropdownMenu",{slot:"list"},[e("DropdownItem",{props:{name:"/preshow.php?appid="}},"预览网站"),e("DropdownItem",{props:{name:"/appeditor/preview.php?appid="}},"预览小程序")])])];return e("div",o)}},{title:"所属软件",align:"center",key:"soft",width:100},{title:"型号",align:"center",key:"rolename",width:100},{title:"状态",width:100,align:"left",render:function(t,e){return t("div",{},1==e.row.status?"正常":"关闭")}},{title:"结束时间",key:"endtime",align:"center",width:200},{title:"软件下载",align:"center",width:100,render:function(e,a){return e("div",[e("Button",{props:{type:"info",disabled:"0"==a.row.haveSoft},style:{margin:"5px"},on:{click:function(){t.showHaveSoft(a.row)}}},"1"==a.row.haveSoft?"查看":"无")])}},{title:"操作",key:"opr",align:"center",width:155,fixed:"right",render:function(e,a){console.log(a.row);var o=[];return 1==a.row.overdue||1==a.row.haveSoft?o.push([e("Button",{props:{type:"success",disabled:1==a.row.overdue},style:{margin:"5px",padding:"0 20px"},on:{click:function(){t.routerPage(a.row)}}},1==a.row.overdue?"已过期":1==a.row.haveSoft?"管理":"内容")]):o.push([e("Dropdown",{props:{placement:"left"},on:{"on-click":function(e){t.openPage(a.row,e)}}},[e("Button",{props:{type:"info"},style:{margin:"5px",padding:"0 20px"},on:{click:function(){}}},"设计"),e("DropdownMenu",{slot:"list"},[e("DropdownItem",{props:{name:"/main.php?appid="}},"网站"),e("DropdownItem",{props:{name:"/appeditor/?appid="}},"小程序")])]),e("Button",{props:{type:"success",disabled:1==a.row.overdue},style:{margin:"5px",padding:"0 20px"},on:{click:function(){t.routerPage(a.row)}}},1==a.row.overdue?"已过期":1==a.row.haveSoft?"管理":"内容")]),e("div",{style:{"text-align":"center"}},o)}}],content:[]},addManagerData:{isModal:!1},isEdit:!1,pageno:10,keyword:"",passwordLine:{password:[{required:!0,message:"必填",trigger:"blur"}],isPassword:[{required:!0,message:"必填",trigger:"blur"}]},editAdmin:{isModal:!1,searchPoptip:!1,id:"",total:0,page:1,realname:"",mobile:"",password:"",isPassword:"",loading:!0,body:[]},adminLine:{realname:[{required:!0,message:"必填",trigger:"blur"}],mobile:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"}],isPassword:[{required:!0,message:"必填",trigger:"blur"}]},editPassword:{isModal:!1,loading:!0,password:"",isPassword:"",id:"",phone:""},adminData:{columns:[{title:"管理员名称",key:"realname"},{title:"等级",render:function(t,e){return t("div",{style:{color:1==e.row.sort?"#ed4014":"#2d8cf0"}},1==e.row.sort?"高级管理员":"普通管理员")},width:"120px"},{title:"状态",render:function(e,a){return e("div",[e(c["a"],{props:{type:1==a.row.yesno?"success":"error",size:"small"},on:{click:function(){var e=1==a.row.yesno?"no":"ok";t.editManager(a.row,e)}}},1==a.row.yesno?"正常":"关闭")])}},{title:"最近登录时间",key:"nowlogin"},{title:"最近登录IP",key:"nowip"},{title:"操作",render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{"margin-right":"10px"},on:{click:function(){t.editPassword.id=a.row.id,t.editPassword.phone=a.row.mobile,t.editPassword.isModal=!0}}},"修改"),e("Button",{props:{type:"error",size:"small"},style:{},on:{click:function(){t.$Modal.confirm({title:"确认删除",content:"确认删除该管理员吗，删除后，该管理员下的所有数据都会被删除",type:"warning",onOk:function(){t.editManager(a.row,"del")},onCancel:function(){}})}}},"删除")])}}],data:[]}}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){window.document.title="欢迎使用",this.pageData.page=Number(this.$route.query.page)||1,this.getAppList(),this.getSoftList(),this.isAgentorAdmin(),console.log("production")},getSoftList:function(){var t=this;this.$http.request({method:"POST",url:"/api_home.php?action=soft_listof",params:{}}).then((function(e){t.softList=e.data.body||[],console.log(e.data)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},loadingOut:function(){var t=this;t.$Modal.confirm({title:"提示",content:"是否退出登录？",onOk:function(){t.$http.post("/api_edit.php?action=logout").then((function(e){t.$Message.info("退出成功"),setTimeout((function(){window.location=e.data.url}),1e3)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},onCancel:function(){t.$Message.info("取消退出")}})},isAgentorAdmin:function(){var t=this,e={action:"check_isAgent"};t.$http.post("/api_home.php",t.$qs.stringify(e)).then((function(e){t.isAgent=e.data.isAgent,t.$Loading.finish()})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e}),t.$Loading.error()}));e={action:"check_isAdmin"};t.$http.post("/api_home.php",t.$qs.stringify(e)).then((function(e){t.isAdmin=e.data.isAdmin,t.$Loading.finish()})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e}),t.$Loading.error()}))},getAppList:function(t){var e=this,a={action:"wxapp_listof",page:this.pageData.page||1,pageno:10,apptype:0};e.$http.post("/api_home.php",e.$qs.stringify(a)).then((function(t){console.log(t.data);e.appData.content=t.data.body,e.pageData.total=Number(t.data.total)})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},routerPage:function(t){if("0"==t.haveSoft)return u.a.set("CookVueAppid",t.id),u.a.set("CookRolecode",t.rolename),void window.open("/work/app-component/","_self");"1"==t.haveSoft&&t.url&&window.open(t.url+"/move/sso.php")},openPage:function(t,e){u.a.set("CookVueAppid",t.id),u.a.set("CookRolecode",t.rolename),"0"!=t.haveSoft?"1"==t.haveSoft&&t.url&&window.open("".concat(t.url+e+t.id)):window.open("".concat(e+t.id))},show:function(t){if(t.row.logo){var e=t.row.logo.split("/");this.picname=e[e.length-1]}this.isModal=!this.isModal,this.path=t.row.logo||this.applogo||"/images/applogo.png",this.wxAppName=t.row.name,this.app_id=t.row.id,console.log(t.row)},wxappEdit:function(){var t=this,e={action:"wxapp_edit",appid:this.app_id,appname:this.wxAppName,logoname:this.picname};console.log(t.$qs.stringify(e)),t.$http.post("/api_home.php",t.$qs.stringify(e)).then((function(e){t.getAppList(),t.picname="",t.path="",t.$Message.info(e.data.message)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},showFile:function(){this.options.appid=this.app_id,this.isUpload=!0},uploadListFun:function(t){this.isUpload=!1,this.picname=t.name,this.path=t.url,console.log(t)},addSoft:function(){var t=this;if(0==this.softData.softID)return this.softData.loading=!1,this.$nextTick((function(){t.softData.loading=!0})),this.$Message.warning("请选择软件类型");this.$http.request({method:"POST",url:"/api_home.php?action=wxapp_add",params:{appname:this.softData.name,softID:this.softData.softID}}).then((function(e){t.softData={name:"",isModal:!1,softID:0,loading:!0},t.getAppList(),console.log(e.data)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e}),t.softData.loading=!1,t.$nextTick((function(){t.softData.loading=!0}))}))},editPasswordData:function(t){var e=this,a=this,o=this.editPassword;this.$refs[t].validate((function(t){if(console.log(t),t){if(o.password!=o.isPassword)return e.$nextTick((function(){e.editPassword.loading=!0})),e.$Message.warning("两次密码不一致，请重新输入");var i={action:"manager_password",managerid:e.editPassword.id,password:e.editPassword.password};a.$http.post("/api_home.php",a.$qs.stringify(i)).then((function(t){a.editPassword.isModal=!1,a.editPassword.password="",a.editPassword.isPassword="",a.$Message.success("修改成功"),a.$Loading.finish()})).catch((function(t){console.log(t),a.$Notice.error({title:"错误提示",desc:t}),a.editPassword.loading=!1,a.$nextTick((function(){a.editPassword.loading=!0}))}))}else a.editPassword.loading=!1,a.$nextTick((function(){a.editPassword.loading=!0}))}))},goeditAdmin:function(){this.addManagerData.isModal=!0},successCallback:function(){this.addManagerData.isModal=!1,this.getAdmin()},cancelCallback:function(){this.addManagerData.isModal=!1},getAdmin:function(t){var e=this,a={action:"manager_listof",pageno:10,page:this.editAdmin.page,keyword:t};this.$Loading.start(),e.$http.post("/api_home.php",e.$qs.stringify(a)).then((function(t){1==t.data.status&&(e.adminData.data=t.data.body,e.editAdmin.total=Number(t.data.total)),e.$Loading.finish()})).catch((function(t){console.log(t),e.$Notice.error({title:"错误提示",desc:t}),e.$Loading.error()}))},editManager:function(t,e){var a=this,o={action:"manager_check",chooseID:t.id,editmode:e};this.$Loading.start(),a.$http.post("/api_home.php",a.$qs.stringify(o)).then((function(t){1==t.data.status&&a.getAdmin(),a.$Loading.finish()})).catch((function(t){console.log(t),a.$Notice.error({title:"错误提示",desc:t}),a.$Loading.error()}))},adminSkippage:function(t){this.editAdmin.page=t,this.getAdmin()},showEditAdmin:function(){this.isEdit=!0,this.getAdmin()},showHaveSoft:function(t){var e=JSON.parse(JSON.stringify(t||{}));e.haveSoft="1"==e.haveSoft,e.isModal=!0,this.appGetData=e},editAppSecret:function(){var t=this;this.$Modal.confirm({title:"确认重置",content:"重置后,需要修改您手工修改软件所在服务器上的move/data/soft_config.php文件中$AppSecret参数,参数不一致软件将无法运行,确定重置吗?",type:"warning",onOk:function(){var e={action:"wxapp_editAppSecret",AppSecret:"",appid:t.appGetData.id};t.$http.post("/api_home.php",t.$qs.stringify(e)).then((function(e){t.appGetData.AppSecret=e.data.body,t.getAppList(),console.log(e)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},onCancel:function(){}})},skippage:function(t){this.$router.push({name:"welcome",query:{page:t}})}}},g=f,w=(a("02b0"),a("c701")),y=Object(w["a"])(g,o,i,!1,null,null,null);e["default"]=y.exports},cfb9:function(t,e,a){t.exports=a.p+"img/applogo.bb8f0d37.png"},f36b:function(t,e,a){},fa69:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables_template"},[t.showlayout?a("Layout",{staticClass:"layout-wrapper"},[t.searchable?a("Header",{staticClass:"header-wrapper"},[t._t("menu"),a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.value)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.cancelSearch}},[t._v("返回")])],1):t._e()],2)],2):a("Header",{staticClass:"header-wrapper"},[t._t("header")],2),a("Layout",{staticClass:"layout-wrapper"},[t.showsider?a("Sider",{staticClass:"sider-wrapper",attrs:{width:"198"}},[t._t("sider")],2):t._e(),a("Layout",{staticClass:"layout-wrapper"},[a("Content",[a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1),a("Footer",{staticClass:"table-footer"},[t._t("footer")],2)],1)],1)],1):a("div",{staticClass:"tableContent"},[t.searchable?a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.searchKey)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.onCancelSearch}},[t._v("返回")])],1):t._e()],2):t._e(),a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1)],1)},i=[],n=(a("2d38"),a("02bf"),a("4798"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables-edit-outer"},[t.isEditting?a("div",{staticClass:"tables-editting-con"},[a("Input",{staticClass:"tables-edit-input",attrs:{value:t.value},on:{input:t.handleInput}}),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.saveEdit}},[a("Icon",{attrs:{type:"md-checkmark"}})],1),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.canceltEdit}},[a("Icon",{attrs:{type:"md-close"}})],1)],1):a("div",{staticClass:"tables-edit-con"},[a("span",{staticClass:"value-con"},[t._v(t._s(t.value))]),t.editable?a("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{ghost:"",type:"text"},on:{click:t.startEdit}},[a("Icon",{attrs:{type:"md-create"}})],1):t._e()],1)])}),s=[],r={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},data:function(){return{}},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(t){this.$emit("input",t)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},l=r,d=(a("56cf"),a("c701")),c=Object(d["a"])(l,n,s,!1,null,null,null),p=c.exports,u={name:"Tables",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},rowKey:{type:String,default:""},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"},showPage:{type:Boolean,default:!1},total:{type:Number,default:0},pageSize:{type:Number,default:10},current:{type:Number,default:1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showlayout:{type:Boolean,default:!1},showsider:{type:Boolean,default:!1}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},mounted:function(){this.handleColumns(this.columns),this.handleTableData()},watch:{columns:function(t){console.log(t),this.handleColumns(t)},value:function(t){this.handleTableData()}},methods:{handleColumns:function(t){var e=this;this.insideColumns=t.map((function(t,a){var o=t;return o.editable&&(o=e.suportEdit(o,a)),o.key,o}))},handleTableData:function(){this.insideTableData=this.value.map((function(t,e){var a=t;return a.initRowIndex=e,a}))},suportEdit:function(t,e){var a=this;return t.render=function(t,e){return t(p,{props:{params:e,value:a.insideTableData[e.index][e.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(t){a.edittingText=t},"on-start-edit":function(t){a.edittingCellId="editting-".concat(t.index,"-").concat(t.column.key),console.log(a.edittingCellId),a.$emit("on-start-edit",t)},"on-cancel-edit":function(t){a.edittingCellId=""},"on-save-edit":function(t){a.value[t.row.initRowIndex][t.column.key]=a.edittingText?a.edittingText:a.value[t.row.initRowIndex][t.column.key],a.$emit("input",a.value),a.$emit("on-save-edit",Object.assign(t,{value:a.value[t.row.initRowIndex][t.column.key]})),a.edittingCellId=""}}})},t},onCurrentChange:function(t,e){this.$emit("on-current-change",t,e)},selectAll:function(t){this.$refs.tablesMain.selectAll(t)},onSelect:function(t,e){this.$emit("on-select",t,e)},onSelectCancel:function(t,e){this.$emit("on-select-cancel",t,e)},onSelectAll:function(t){this.$emit("on-select-all",t)},onSelectionChange:function(t){this.$emit("on-selection-change",t)},onSortChange:function(t,e,a){this.$emit("on-sort-change",t,e,a)},onFilterChange:function(t){this.$emit("on-filter-change",t)},onRowClick:function(t,e){this.$emit("on-row-click",t,e)},onRowDblclick:function(t,e){this.$emit("on-row-dblclick",t,e)},onExpand:function(t,e){this.$emit("on-expand",t,e)},skippage:function(t){this.$emit("on-skippage",t)},onSearchChange:function(){this.$emit("on-search-change",this.searchKey)},onCancelSearch:function(t){this.$emit("on-cancel-search",t)},onPathEdit:function(t){this.$emit("on-path-edit",t)}}},h=u,m=(a("4748"),Object(d["a"])(h,o,i,!1,null,null,null)),f=m.exports;e["a"]=f}}]);