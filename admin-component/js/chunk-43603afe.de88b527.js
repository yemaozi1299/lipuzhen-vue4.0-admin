(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43603afe"],{"361d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("应用管理")]),a("tables",{ref:"tables",attrs:{editable:"","search-place":"top",columns:t.infoData.columns,showPage:"",total:t.pageData.total,current:t.pageData.page,"page-size":t.pageno,"show-total":"","show-elevator":"",showlayout:"",loading:t.loading},on:{"on-skippage":t.skippage},model:{value:t.infoData.data,callback:function(e){t.$set(t.infoData,"data",e)},expression:"infoData.data"}},[a("template",{slot:"header"},[a("div",{staticClass:"search-area"},[a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.get(t.keyword)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.get(t.keyword)}}})],1)])],2),a("Modal",{attrs:{title:"续费"},on:{"on-ok":t.appPrice,"on-cancel":function(t){}},model:{value:t.isModal,callback:function(e){t.isModal=e},expression:"isModal"}},[a("label",{staticClass:"label-price",staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",{staticClass:"label-span"},[t._v("版本")]),a("span",[t._v(t._s(t.addAppData.rolename))])]),a("label",{staticClass:"label-price",staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",{staticClass:"label-span"},[t._v("开始时间")]),a("span",[t._v(t._s(t.addAppData.starttime))])]),a("label",{staticClass:"label-price",staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",{staticClass:"label-span"},[t._v("结束时间")]),a("span",[t._v(t._s(t.addAppData.endtime))])]),a("label",{staticClass:"label-price",staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",{staticClass:"label-span"},[t._v("续费")]),a("Input",{staticStyle:{width:"50px"},attrs:{type:"text"},model:{value:t.addAppData.year,callback:function(e){t.$set(t.addAppData,"year",e)},expression:"addAppData.year"}}),a("span",[t._v("年")])],1)]),a("Modal",{attrs:{title:"修改应用"},on:{"on-ok":t.editPriseApp,"on-cancel":function(t){}},model:{value:t.editAppData.isModal,callback:function(e){t.$set(t.editAppData,"isModal",e)},expression:"editAppData.isModal"}},[a("label",{staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",[t._v("应用名称：")]),a("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:t.editAppData.name,callback:function(e){t.$set(t.editAppData,"name",e)},expression:"editAppData.name"}})],1),a("label",{staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",[t._v("到期时间：")]),a("label",{attrs:{for:""}},[a("Checkbox",{model:{value:t.editAppData.single,callback:function(e){t.$set(t.editAppData,"single",e)},expression:"editAppData.single"}},[t._v("永久")])],1),t.editAppData.single?t._e():a("label",{attrs:{for:""}},[a("DatePicker",{staticStyle:{width:"170px",display:"inline-block","margin-right":"10px"},attrs:{type:"date"},model:{value:t.editAppData.date,callback:function(e){t.$set(t.editAppData,"date",e)},expression:"editAppData.date"}}),a("TimePicker",{staticStyle:{width:"170px",display:"inline-block"},attrs:{type:"time"},model:{value:t.editAppData.time,callback:function(e){t.$set(t.editAppData,"time",e)},expression:"editAppData.time"}})],1)]),a("label",{staticStyle:{display:"block","margin-bottom":"10px"}},[a("span",[t._v("软件类型：")]),a("Select",{staticStyle:{width:"200px"},model:{value:t.selectedSoft,callback:function(e){t.selectedSoft=e},expression:"selectedSoft"}},t._l(t.softList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.softname))])})),1)],1),a("label",{staticStyle:{display:"block"}},[a("span",[t._v("软件型号：")]),a("Select",{staticStyle:{width:"200px"},model:{value:t.editAppData.rolecode,callback:function(e){t.$set(t.editAppData,"rolecode",e)},expression:"editAppData.rolecode"}},t._l(t.pariceList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.rolename))])})),1)],1)]),a("Modal",{attrs:{title:"设为样板"},on:{"on-ok":t.addAppExample,"on-cancel":function(t){}},model:{value:t.example_data.isModal,callback:function(e){t.$set(t.example_data,"isModal",e)},expression:"example_data.isModal"}},[a("Form",{attrs:{"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"模版缩略图："}},[a("div",{staticClass:"change-img-wrap cover-wrap"},[a("img",{attrs:{src:t.example_data.cover,alt:"",id:"collect-cover"}}),a("input",{attrs:{type:"file",id:"page-cocer"},on:{change:t.ExampleAdd}}),a("p",{staticClass:"text"},[t._v("点击更换缩略图")])])]),a("FormItem",{attrs:{label:"模版标题："}},[a("Input",{attrs:{type:"text"},model:{value:t.example_data.name,callback:function(e){t.$set(t.example_data,"name",e)},expression:"example_data.name"}})],1)],1)],1),a("Modal",{attrs:{title:"设置软件授权信息"},on:{"on-ok":t.appsoftSet},model:{value:t.softData.isModal,callback:function(e){t.$set(t.softData,"isModal",e)},expression:"softData.isModal"}},[a("Form",{attrs:{"label-width":100,"label-position":"left"}},[a("FormItem",{attrs:{label:"授权状态"}},[a("i-switch",{model:{value:t.softData.haveSoft,callback:function(e){t.$set(t.softData,"haveSoft",e)},expression:"softData.haveSoft"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.softData.haveSoft,expression:"softData.haveSoft"}]},[a("FormItem",{attrs:{label:"授权域名"}},[a("Input",{attrs:{placeholder:"http://www.baidu.com"},model:{value:t.softData.url,callback:function(e){t.$set(t.softData,"url",e)},expression:"softData.url"}})],1),a("FormItem",{attrs:{label:"AppSecret（选填）"}},[a("Input",{attrs:{placeholder:""},model:{value:t.softData.AppSecret,callback:function(e){t.$set(t.softData,"AppSecret",e)},expression:"softData.AppSecret"}})],1)],1)],1)],1)],1)},n=[],i=(a("64fe"),a("02bf"),a("90d4"),a("5c4c"),a("4798"),a("845c"),a("d8f4"),a("72fb"),a("2083"),a("3e83")),s=a("fa69"),l=a("983d"),r=a("750c"),c=a.n(r),p={components:{Tables:s["a"],Buttons:l["a"]},data:function(){var t=this;return{softList:[],selectedSoft:"",isUpload:!1,softData:{isModal:!1,name:"",haveSoft:!1,id:"",roleID:"",softID:"",AppSecret:"",url:"",user:""},example_data:{isModal:!1,cover:"",name:"",fromappid:""},pageno:10,loading:!1,isModal:!1,searching:!1,keyword:"",searchPoptip:!1,moves:"",vueAppid:this.$cookieStore.get("CookVueAppid"),pariceList:{},pageData:{total:0,page:1},editAppData:{isModal:!1,name:"",date:"",single:!1,rolecode:[]},addAppData:{rolecode:"",rolename:"",starttime:"",endtime:"",time:"",year:1,id:""},versionArr:{},infoData:{columns:[{title:"应用图标",width:100,render:function(t,e){return t("div",{attrs:{class:"app-upload-list"}},[t("img",{attrs:{src:e.row.logo?"/userlist/"+e.row.user+"/"+e.row.id+"/userpic/"+e.row.logo:c.a},on:{click:function(){window.open("/appeditor/preview.php?appid="+e.row.id),console.log(e.row.id)}}},"设置")])}},{title:"应用名称",align:"center",width:200,render:function(e,a){var o=[e("Dropdown",{props:{placement:"right"},on:{"on-click":function(e){t.openPage(a.row,e),console.log(e)}}},[e("Button",{props:{type:"text"},style:{margin:"5px",padding:"0 20px",color:"#39f"},on:{click:function(){}}},a.row.name),e("DropdownMenu",{slot:"list"},[e("DropdownItem",{props:{name:"/preshow.php?appid="}},"预览网站"),e("DropdownItem",{props:{name:"/appeditor/preview.php?appid="}},"预览小程序")])])];return e("div",o)}},{title:"版本",key:"rolename",width:"120px"},{title:"到期时间",key:"endtime",width:"170px"},{title:"访问量",key:"count",width:"90px"},{title:"所属代理商",key:"agentname",width:120},{title:"所属企业",key:"companyname",width:120},{title:"软件",width:120,render:function(e,a){return e("div",[e("Button",{props:{type:0==a.row.haveSoft?"success":"warning",size:"small"},style:{color:"#fff"},on:{click:function(){t.appGet(a.row)}}},0==a.row.haveSoft?"授权":"修改")])}},{title:"状态",render:function(e,a){return e("div",[e("Button",{props:{type:1==a.row.status?"info":"error",size:"small"},style:{color:"#fff"},on:{click:function(){t.companyStatus(a.row)}}},1==a.row.status?"正常":"关闭")])},width:"90px"},{title:"操作",align:"left",width:320,fixed:"right",render:function(e,a){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{color:"#fff","margin-right":"10px"},on:{click:function(){t.addAppData={rolecode:a.row.rolecode,rolename:a.row.rolename,starttime:a.row.starttime,endtime:a.row.endtime,year:1,id:a.row.id},t.isModal=!0}}},"续费"),e("Button",{props:{type:"warning",size:"small"},style:{color:"#fff","margin-right":"10px"},on:{click:function(){var e=a.row.endtime.split(" ");t.editAppData.isModal=!0,t.editAppData.name=a.row.name,t.editAppData.appid=a.row.id,t.editAppData.date=e[0],t.editAppData.time=e[1],t.editAppData.rolecode=a.row.rolecode,console.log(e)}}},"修改"),e("Button",{props:{type:"info",size:"small"},style:{color:"#fff","margin-right":"10px"},on:{click:function(){console.log(a.row),t.$router.push({name:"example_appadd",params:{page:1},query:{fromappid:a.row.id,name:a.row.name,appid:a.row.id}})}}},"设为样板"),e("Button",{props:{type:"error",size:"small"},style:{color:"#fff"},on:{click:function(){console.log(a.row);var e=t;t.$Modal.confirm({content:"确定要删除该应用吗？删除后数据无法恢复",cancelText:"取消",onOk:function(){e.delApp(a.row)},onCancel:function(){}})}}},"删除")])}}],data:[]}}},created:function(){this.get(),this.getSoftList()},watch:{selectedSoft:function(t){this.getAgentprice()}},methods:{openPage:function(t,e){"0"!=t.haveSoft?"1"==t.haveSoft&&t.url&&window.open("".concat(t.url+e+t.id)):window.open("".concat(e+t.id))},getSoftList:function(){var t=this;this.$http.request({url:"/api_admin.php?action=soft_listof"}).then((function(e){t.softList=e.data.body||[],console.log(e.data)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))},uploadListFun:function(t){this.isUpload=!1,this.example_data.cover=t.url},delApp:function(t){var e=this,a={action:"app_del",id:t.id};console.log(a),this.$Loading.start(),e.$http.post("/api_admin.php",e.$qs.stringify(a)).then((function(a){console.log(a),1==a.data.status?(e.infoData.data.splice(t._index,1),e.$Message.info(a.data.message)):e.$Message.warning(a.data.message),e.$Loading.finish()})).catch((function(t){console.log(t),e.$Notice.error({title:"错误提示",desc:t}),e.$Loading.error()}))},get:function(t){var e=this,a=this;t&&(this.pageData.page=1);var o={action:"wxapplistof",appid:this.vueAppid,user:this.$route.query.user,pageno:10,page:this.pageData.page,keyword:t};a.searching=!!t,a.infoData.data=[],a.$http.post("/api_admin.php",a.$qs.stringify(o)).then((function(t){1==t.data.status&&(a.infoData.data=t.data.body||[],a.pageData.total=Number(t.data.total)),console.log(t.data)})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},skippage:function(t){this.pageData.page=t,this.get()},companyStatus:function(t){var e=this,a=this,o={action:"app_status",id:t.id,status:1==t.status?0:1};this.$Loading.start(),a.$http.post("/api_admin.php",a.$qs.stringify(o)).then((function(e){1==e.data.status&&(a.infoData.data[t._index].status=1==t.status?0:1),console.log(e.data),a.$Loading.finish()})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},appPrice:function(){return this.$Message.error("超级管理员还没有续费功能"),!1},editPriseApp:function(){var t=this,e=this.formatDate(this.editAppData.date)+" "+this.editAppData.time,a={action:"app_edit",appid:this.editAppData.appid,appname:this.editAppData.name,endtime:this.editAppData.single?"0":e,roleID:this.editAppData.rolecode};console.log(a),this.$Loading.start(),t.$http.post("/api_admin.php",t.$qs.stringify(a)).then((function(e){1==e.data.status?(t.get(),t.addAppData.name=""):t.$Message.info(e.data.message),console.log(e.data),t.$Loading.finish()})).catch((function(e){console.log(e),t.$Notice.error({title:"错误提示",desc:e}),t.$Loading.error()}))},getAgentprice:function(){var t=this,e={action:"role_listof",softID:this.selectedSoft};this.$Loading.start(),t.$http.post("/api_admin.php",t.$qs.stringify(e)).then((function(e){1==e.data.status?t.pariceList=e.data.body:t.$Message.info(e.data.message),console.log(e.data),t.$Loading.finish()})).catch((function(e){console.log(e),t.$Notice.error({title:"错误提示",desc:e}),t.$Loading.error()}))},formatDate:function(t){if(console.log(Object(i["a"])(t)),t&&"string"==typeof t)return t;t||(t=new Date);var e=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return[e,a,o].map(this.formatNumber).join("-")},formatNumber:function(t){return t=t.toString(),t[1]?t:"0"+t},ExampleAdd:function(t){var e=t.target.files[0],a=this;if(e){var o=/^(image\/jpeg|image\/png|image\/gif)$/i;if(o.test(e.type)){var n=new FileReader;n.readAsDataURL(e),n.onload=function(t){var e=this.result;a.example_data.cover=e}}else this.$Message.error("文件格式不正确")}},addAppExample:function(){var t=this;if(!this.example_data.cover||!this.example_data.name)return t.$Message.success("图片或名称不能为空");var e={action:"example_appadd",fromappid:this.example_data.fromappid,cover:this.example_data.cover,example_name:this.example_data.name};console.log(e.fromappid),this.$Loading.start(),t.$http.post("/api_admin.php",t.$qs.stringify(e)).then((function(e){console.log(e.data),1==e.data.status?(t.example_data.isModal=!1,t.example_data.cover="",t.$Message.success("添加样板成功")):t.$Message.info(e.data.message),t.$Loading.finish()})).catch((function(e){console.log(e),t.$Notice.error({title:"错误提示",desc:e}),t.$Loading.error()}))},appGet:function(t){var e=this;this.$http.request({method:"POST",url:"/api_admin.php?action=app_get",params:{user:t.user,appid:t.id}}).then((function(t){e.showHaveSoft(t.data),console.log(t)})).catch((function(t){e.$Notice.error({title:"错误提示",desc:t})}))},showHaveSoft:function(t){var e=t.body;e.haveSoft="1"==e.haveSoft,e.isModal=!0,this.softData=e},appsoftSet:function(){var t=this,e=this.softData;this.$http.request({method:"POST",url:"/api_admin.php?action=app_soft_set",params:{user:e.user,appid:e.id,url:e.url,AppSecret:e.AppSecret,haveSoft:e.haveSoft?"1":"0"}}).then((function(e){t.softData.isModal=!1,t.get(),console.log(e)})).catch((function(e){t.$Notice.error({title:"错误提示",desc:e})}))}}},d=p,u=(a("6f01"),a("c701")),h=Object(u["a"])(d,o,n,!1,null,null,null);e["default"]=h.exports},"3b81":function(t,e,a){},4748:function(t,e,a){"use strict";a("5b09")},"56cf":function(t,e,a){"use strict";a("8582")},"5b09":function(t,e,a){},"6f01":function(t,e,a){"use strict";a("3b81")},"750c":function(t,e,a){t.exports=a.p+"img/noimage.d53a8be2.jpg"},8582:function(t,e,a){},"8c22":function(t,e,a){"use strict";a("8ce8")},"8ce8":function(t,e,a){},"983d":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.classes,on:{click:t.onClick}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._t("default")],2),t.border?a("span",{staticClass:"divider"}):t._e()])},n=[],i="rich-btn",s={name:"Buttons",props:{border:{type:Boolean,default:!1},type:{type:String,default:"default"}},data:function(){return{}},methods:{onClick:function(t){this.$emit("click",t)}},computed:{classes:function(){return["".concat(i),"".concat(i,"-").concat(this.type)]}}},l=s,r=(a("8c22"),a("c701")),c=Object(r["a"])(l,o,n,!1,null,null,null),p=c.exports;e["a"]=p},fa69:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables_template"},[t.showlayout?a("Layout",{staticClass:"layout-wrapper"},[t.searchable?a("Header",{staticClass:"header-wrapper"},[t._t("menu"),a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.value)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.cancelSearch}},[t._v("返回")])],1):t._e()],2)],2):a("Header",{staticClass:"header-wrapper"},[t._t("header")],2),a("Layout",{staticClass:"layout-wrapper"},[t.showsider?a("Sider",{staticClass:"sider-wrapper",attrs:{width:"198"}},[t._t("sider")],2):t._e(),a("Layout",{staticClass:"layout-wrapper"},[a("Content",[a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1),a("Footer",{staticClass:"table-footer"},[t._t("footer")],2)],1)],1)],1):a("div",{staticClass:"tableContent"},[t.searchable?a("div",{staticClass:"search-area"},[t._t("addbtn"),a("Input",{staticClass:"ant-search-input mg-r-10",staticStyle:{width:"200px"},attrs:{placeholder:"关键字",clearable:""},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchChange(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),a("Button",{staticClass:"ant-search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.onSearchChange}}),t.isSearch?a("div",{staticClass:"search-content"},[t._v(" 搜索:"+t._s(t.searchKey)+" "),a("Button",{attrs:{type:"primary",size:"small",shape:"circle"},on:{click:t.onCancelSearch}},[t._v("返回")])],1):t._e()],2):t._e(),a("Table",{ref:"tablesMain",attrs:{"row-key":t.rowKey,data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}}),1==t.showPage&&t.total>t.pageSize?a("div",{staticClass:"page-content"},[a("Page",{attrs:{total:t.total,current:t.current,"page-size":t.pageSize,"show-total":t.showTotal,"show-elevator":t.showElevator},on:{"on-change":t.skippage}})],1):t._e()],1)],1)},n=[],i=(a("2d38"),a("02bf"),a("4798"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables-edit-outer"},[t.isEditting?a("div",{staticClass:"tables-editting-con"},[a("Input",{staticClass:"tables-edit-input",attrs:{value:t.value},on:{input:t.handleInput}}),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.saveEdit}},[a("Icon",{attrs:{type:"md-checkmark"}})],1),a("Button",{staticStyle:{padding:"6px 4px",color:"#2d8cf0","box-shadow":"none"},attrs:{type:"text",ghost:""},on:{click:t.canceltEdit}},[a("Icon",{attrs:{type:"md-close"}})],1)],1):a("div",{staticClass:"tables-edit-con"},[a("span",{staticClass:"value-con"},[t._v(t._s(t.value))]),t.editable?a("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{ghost:"",type:"text"},on:{click:t.startEdit}},[a("Icon",{attrs:{type:"md-create"}})],1):t._e()],1)])}),s=[],l={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},data:function(){return{}},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(t){this.$emit("input",t)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},r=l,c=(a("56cf"),a("c701")),p=Object(c["a"])(r,i,s,!1,null,null,null),d=p.exports,u={name:"Tables",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},rowKey:{type:String,default:""},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"},showPage:{type:Boolean,default:!1},total:{type:Number,default:0},pageSize:{type:Number,default:10},current:{type:Number,default:1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showlayout:{type:Boolean,default:!1},showsider:{type:Boolean,default:!1}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},mounted:function(){this.handleColumns(this.columns),this.handleTableData()},watch:{columns:function(t){console.log(t),this.handleColumns(t)},value:function(t){this.handleTableData()}},methods:{handleColumns:function(t){var e=this;this.insideColumns=t.map((function(t,a){var o=t;return o.editable&&(o=e.suportEdit(o,a)),o.key,o}))},handleTableData:function(){this.insideTableData=this.value.map((function(t,e){var a=t;return a.initRowIndex=e,a}))},suportEdit:function(t,e){var a=this;return t.render=function(t,e){return t(d,{props:{params:e,value:a.insideTableData[e.index][e.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(t){a.edittingText=t},"on-start-edit":function(t){a.edittingCellId="editting-".concat(t.index,"-").concat(t.column.key),console.log(a.edittingCellId),a.$emit("on-start-edit",t)},"on-cancel-edit":function(t){a.edittingCellId=""},"on-save-edit":function(t){a.value[t.row.initRowIndex][t.column.key]=a.edittingText?a.edittingText:a.value[t.row.initRowIndex][t.column.key],a.$emit("input",a.value),a.$emit("on-save-edit",Object.assign(t,{value:a.value[t.row.initRowIndex][t.column.key]})),a.edittingCellId=""}}})},t},onCurrentChange:function(t,e){this.$emit("on-current-change",t,e)},selectAll:function(t){this.$refs.tablesMain.selectAll(t)},onSelect:function(t,e){this.$emit("on-select",t,e)},onSelectCancel:function(t,e){this.$emit("on-select-cancel",t,e)},onSelectAll:function(t){this.$emit("on-select-all",t)},onSelectionChange:function(t){this.$emit("on-selection-change",t)},onSortChange:function(t,e,a){this.$emit("on-sort-change",t,e,a)},onFilterChange:function(t){this.$emit("on-filter-change",t)},onRowClick:function(t,e){this.$emit("on-row-click",t,e)},onRowDblclick:function(t,e){this.$emit("on-row-dblclick",t,e)},onExpand:function(t,e){this.$emit("on-expand",t,e)},skippage:function(t){this.$emit("on-skippage",t)},onSearchChange:function(){this.$emit("on-search-change",this.searchKey)},onCancelSearch:function(t){this.$emit("on-cancel-search",t)},onPathEdit:function(t){this.$emit("on-path-edit",t)}}},h=u,f=(a("4748"),Object(c["a"])(h,o,n,!1,null,null,null)),m=f.exports;e["a"]=m}}]);